<div>

<script>function inject() {

	var originalOpenWndFnKey = "originalOpenFunction";

			var originalWindowOpenFn 	= window.open,
			    originalCreateElementFn = document.createElement,
			    originalCreateEventFn 	= document.createEvent,
				windowsWithNames = {};
			var timeSinceCreateAElement = 0;
			var lastCreatedAElement = null;
			var fullScreenOpenTime;
			var parentOrigin = (window.location != window.parent.location) ? document.referrer: document.location;

			window[originalOpenWndFnKey] = window.open; // save the original open window as global param

			function newWindowOpenFn() {

				var openWndArguments = arguments,
					useOriginalOpenWnd = true,
					generatedWindow = null;

				function blockedWndNotification(openWndArguments) {
					parent.postMessage({ type: "blockedWindow", args: JSON.stringify(openWndArguments) }, parentOrigin);
				}

				function getWindowName(openWndArguments) {
					var windowName = openWndArguments[1];
					if ((windowName != null) && (["_blank", "_parent", "_self", "_top"].indexOf(windowName) < 0)) {
						return windowName;
					}

					return null;
				}

				function copyMissingProperties(src, dest) {
					var prop;
					for(prop in src) {
						try {
							if (dest[prop] === undefined) {
								dest[prop] = src[prop];
						}
						} catch (e) {}
					}
					return dest;
				}

					// the element who registered to the event
					var capturingElement = null;
					if (window.event != null) {
						capturingElement = window.event.currentTarget;
					}

					if (capturingElement == null) {
						var caller = openWndArguments.callee;
						while ((caller.arguments != null) && (caller.arguments.callee.caller != null)) {
							caller = caller.arguments.callee.caller;
						}
						if ((caller.arguments != null) && (caller.arguments.length > 0) && (caller.arguments[0].currentTarget != null)) {
							capturingElement = caller.arguments[0].currentTarget;
						}
					}

				/////////////////////////////////////////////////////////////////////////////////
				// Blocked if a click on background element occurred (<body> or document)
				/////////////////////////////////////////////////////////////////////////////////

					if ((capturingElement != null) && (
							(capturingElement instanceof Window) ||
							(capturingElement === document) ||
							(
								(capturingElement.URL != null) && (capturingElement.body != null)
							) ||
							(
								(capturingElement.nodeName != null) && (
									(capturingElement.nodeName.toLowerCase() == "body") ||
									(capturingElement.nodeName.toLowerCase() == "#document")
								)
							)
						)) {
							window.pbreason = "Blocked a new window opened with URL: " + openWndArguments[0] + " because it was triggered by the " + capturingElement.nodeName + " element";
							// console.info(window.pbreason);
							useOriginalOpenWnd = false;
					} else {
						useOriginalOpenWnd = true;
					}
				/////////////////////////////////////////////////////////////////////////////////



				/////////////////////////////////////////////////////////////////////////////////
				// Block if a full screen was just initiated while opening this url.
				/////////////////////////////////////////////////////////////////////////////////

					// console.info("fullscreen: " + ((new Date()).getTime() - fullScreenOpenTime));
					// console.info("webkitFullscreenElement: " + document.webkitFullscreenElement);
					var fullScreenElement = document.webkitFullscreenElement || document.mozFullscreenElement || document.fullscreenElement
					if ((((new Date()).getTime() - fullScreenOpenTime) < 1000) || ((isNaN(fullScreenOpenTime) && (isDocumentInFullScreenMode())))) {

						window.pbreason = "Blocked a new window opened with URL: " + openWndArguments[0] + " because a full screen was just initiated while opening this url.";
						// console.info(window.pbreason);

						/* JRA REMOVED
						if (window[script_params.fullScreenFnKey]) {
							window.clearTimeout(window[script_params.fullScreenFnKey]);
						}
						*/

						if (document.exitFullscreen) {
							document.exitFullscreen();
						}
						else if (document.mozCancelFullScreen) {
							document.mozCancelFullScreen();
						}
						else if (document.webkitCancelFullScreen) {
							document.webkitCancelFullScreen();
						}

						useOriginalOpenWnd = false;
					}
				/////////////////////////////////////////////////////////////////////////////////


				if (useOriginalOpenWnd == true) {

					// console.info("allowing new window to be opened with URL: " + openWndArguments[0]);

					generatedWindow = originalWindowOpenFn.apply(this, openWndArguments);

					// save the window by name, for latter use.
					var windowName = getWindowName(openWndArguments);
					if (windowName != null) {
						windowsWithNames[windowName] = generatedWindow;
					}

					// 2nd line of defence: allow window to open but monitor carefully...

					/////////////////////////////////////////////////////////////////////////////////
					// Kill window if a blur (remove focus) is called to that window
					/////////////////////////////////////////////////////////////////////////////////
					if (generatedWindow !== window) {
						var openTime = (new Date()).getTime();
						var originalWndBlurFn = generatedWindow.blur;
						generatedWindow.blur = function() {
							if (((new Date()).getTime() - openTime) < 1000 /* one second */) {
								window.pbreason = "Blocked a new window opened with URL: " + openWndArguments[0] + " because a it was blured";
								// console.info(window.pbreason);
								generatedWindow.close();
								blockedWndNotification(openWndArguments);
							} else {
								// console.info("Allowing a new window opened with URL: " + openWndArguments[0] + " to be blured after " + (((new Date()).getTime() - openTime)) + " seconds");
								originalWndBlurFn();
							}
						};
					}
					/////////////////////////////////////////////////////////////////////////////////

				} else { // (useOriginalOpenWnd == false)

						var location = {
							href: openWndArguments[0]
						};
						location.replace = function(url) {
							location.href = url;
						};

						generatedWindow = {
							close:						function() {return true;},
							test:						function() {return true;},
							blur:						function() {return true;},
							focus:						function() {return true;},
							showModelessDialog:			function() {return true;},
							showModalDialog:			function() {return true;},
							prompt:						function() {return true;},
							confirm:					function() {return true;},
							alert:						function() {return true;},
							moveTo:						function() {return true;},
							moveBy:						function() {return true;},
							resizeTo:					function() {return true;},
							resizeBy:					function() {return true;},
							scrollBy:					function() {return true;},
							scrollTo:					function() {return true;},
							getSelection:				function() {return true;},
							onunload:					function() {return true;},
							print:						function() {return true;},
							open:						function() {return this;},
							opener:						window,
							closed:						false,
							innerHeight:				480,
							innerWidth:					640,
							name:						openWndArguments[1],
							location:					location,
							document:					{location: location}
						};

					copyMissingProperties(window, generatedWindow);

					generatedWindow.window = generatedWindow;

					var windowName = getWindowName(openWndArguments);
					if (windowName != null) {
						try {
							// originalWindowOpenFn("", windowName).close();
							windowsWithNames[windowName].close();
							// console.info("Closed window with the following name: " + windowName);
						} catch (err) {
							// console.info("Couldn't close window with the following name: " + windowName);
						}
					}

					setTimeout(function() {
						var url;
						if (!(generatedWindow.location instanceof Object)) {
							url = generatedWindow.location;
						} else if (!(generatedWindow.document.location instanceof Object)) {
							url = generatedWindow.document.location;
						} else if (location.href != null) {
							url = location.href;
						} else {
							url = openWndArguments[0];
						}
						openWndArguments[0] = url;
						blockedWndNotification(openWndArguments);
					}, 100);
				}

				return generatedWindow;
			}


			/////////////////////////////////////////////////////////////////////////////////
			// Replace the window open method with Poper Blocker's
			/////////////////////////////////////////////////////////////////////////////////
			window.open = function() {
				try {
					return newWindowOpenFn.apply(this, arguments);
				} catch(err) {
					return null;
				}
			};
			/////////////////////////////////////////////////////////////////////////////////



			//////////////////////////////////////////////////////////////////////////////////////////////////////////
			// Monitor dynamic html element creation to prevent generating <a> elements with click dispatching event
			//////////////////////////////////////////////////////////////////////////////////////////////////////////
			document.createElement = function() {

					var newElement = originalCreateElementFn.apply(document, arguments);

					if (arguments[0] == "a" || arguments[0] == "A") {

						timeSinceCreateAElement = (new Date).getTime();

						var originalDispatchEventFn = newElement.dispatchEvent;

						newElement.dispatchEvent = function(event) {
							if (event.type != null && (("" + event.type).toLocaleLowerCase() == "click")) {
								window.pbreason = "blocked due to an explicit dispatchEvent event with type 'click' on an 'a' tag";
								// console.info(window.pbreason);
								parent.postMessage({type:"blockedWindow", args: JSON.stringify({"0": newElement.href}) }, parentOrigin);
								return true;
							}

							return originalDispatchEventFn(event);
						};

						lastCreatedAElement = newElement;

					}

					return newElement;
			};
			/////////////////////////////////////////////////////////////////////////////////




			/////////////////////////////////////////////////////////////////////////////////
			// Block artificial mouse click on frashly created <a> elements
			/////////////////////////////////////////////////////////////////////////////////
			document.createEvent = function() {
				try {
					if ((arguments[0].toLowerCase().indexOf("mouse") >= 0) && ((new Date).getTime() - timeSinceCreateAElement) <= 50) {
						window.pbreason = "Blocked because 'a' element was recently created and " + arguments[0] + " event was created shortly after";
						// console.info(window.pbreason);
						arguments[0] = lastCreatedAElement.href;
						parent.postMessage({ type: "blockedWindow", args: JSON.stringify({"0": lastCreatedAElement.href}) }, parentOrigin);
						return null;
					}
					return originalCreateEventFn.apply(document, arguments);
				} catch(err) {}
			};
			/////////////////////////////////////////////////////////////////////////////////





			/////////////////////////////////////////////////////////////////////////////////
			// Monitor full screen requests
			/////////////////////////////////////////////////////////////////////////////////
			function onFullScreen(isInFullScreenMode) {
					if (isInFullScreenMode) {
						fullScreenOpenTime = (new Date()).getTime();
						// console.info("fullScreenOpenTime = " + fullScreenOpenTime);
					} else {
						fullScreenOpenTime = NaN;
					}
			};
			/////////////////////////////////////////////////////////////////////////////////

			function isDocumentInFullScreenMode() {
				// Note that the browser fullscreen (triggered by short keys) might
				// be considered different from content fullscreen when expecting a boolean
				return ((document.fullScreenElement && document.fullScreenElement !== null) ||    // alternative standard methods
					((document.mozFullscreenElement != null) || (document.webkitFullscreenElement != null)));                   // current working methods
			}

			document.addEventListener("fullscreenchange", function () {
				onFullScreen(document.fullscreen);
			}, false);

			document.addEventListener("mozfullscreenchange", function () {
				onFullScreen(document.mozFullScreen);
			}, false);

			document.addEventListener("webkitfullscreenchange", function () {
				onFullScreen(document.webkitIsFullScreen);
			}, false);

		} inject()</script>

<div id="xml_editor"><div class="xml_editor_container"><div class="xml_work_area" style="width: 1124px;"><div class="xml_editor_header_backing" style="height: 37px; position: absolute; top: 0px;"></div><div class="xml_editor_header" style="position: absolute; top: 0px;"><div class="xml_menu_bar"><ul><li id="xml_header_item_File"><span class="xml_menu_check"></span><a><span>File</span></a><ul class="sub_menu"><li class="disabled" id="xml_header_item_Submit_to_Server"><span class="xml_menu_check"></span><a><span>Submit to Server</span><span class="binding">ctrl+alt+s</span></a></li><li id="xml_header_item_Export"><span class="xml_menu_check"></span><a><span>Export</span><span class="binding">ctrl+alt+e</span></a></li></ul></li><li id="xml_header_item_Edit"><span class="xml_menu_check"></span><a><span>Edit</span></a><ul class="sub_menu"><li class="disabled" id="xml_header_item_Undo"><span class="xml_menu_check"></span><a><span>Undo</span><span class="binding">ctrl+z or mac+z</span></a></li><li class="disabled" id="xml_header_item_Redo"><span class="xml_menu_check"></span><a><span>Redo</span><span class="binding">ctrl+y or mac+shift+z</span></a></li><li id="xml_header_item_Delete"><span class="xml_menu_check"></span><a><span>Delete</span><span class="binding">del</span></a></li><li id="xml_header_item_Move_Element_Up"><span class="xml_menu_check"></span><a><span>Move Element Up</span><span class="binding">alt+up</span></a></li><li id="xml_header_item_Move_Element_Down"><span class="xml_menu_check"></span><a><span>Move Element Down</span><span class="binding">alt+down</span></a></li></ul></li><li id="xml_header_item_Select"><span class="xml_menu_check"></span><a><span>Select</span></a><ul class="sub_menu"><li id="xml_header_item_Deselect"><span class="xml_menu_check"></span><a><span>Deselect</span><span class="binding">esc</span></a></li><li id="xml_header_item_Next_Element"><span class="xml_menu_check"></span><a><span>Next Element</span><span class="binding">down</span></a></li><li id="xml_header_item_Previous_Element"><span class="xml_menu_check"></span><a><span>Previous Element</span><span class="binding">up</span></a></li><li id="xml_header_item_Next_Attribute"><span class="xml_menu_check"></span><a><span>Next Attribute</span><span class="binding">right</span></a></li><li id="xml_header_item_Previous_Attribute"><span class="xml_menu_check"></span><a><span>Previous Attribute</span><span class="binding">left</span></a></li><li id="xml_header_item_Parent"><span class="xml_menu_check"></span><a><span>Parent</span><span class="binding">shift+left</span></a></li><li id="xml_header_item_First_Child"><span class="xml_menu_check"></span><a><span>First Child</span><span class="binding">shift+right</span></a></li><li id="xml_header_item_Next_Sibling"><span class="xml_menu_check"></span><a><span>Next Sibling</span><span class="binding">shift+down</span></a></li><li id="xml_header_item_Previous_Sibling"><span class="xml_menu_check"></span><a><span>Previous Sibling</span><span class="binding">shift+up</span></a></li></ul></li><li id="xml_header_item_Insert"><span class="xml_menu_check"></span><a><span>Insert</span></a><ul class="sub_menu"><li id="xml_header_item_Add_attribute"><span class="xml_menu_check"></span><a><span>Add attribute</span><span class="binding">alt+a</span></a></li><li id="xml_header_item_Add_element"><span class="xml_menu_check"></span><a><span>Add element</span><span class="binding">enter</span></a></li><li id="xml_header_item_Add_child_element"><span class="xml_menu_check"></span><a><span>Add child element</span><span class="binding">alt+e</span></a></li><li id="xml_header_item_Add_sibling_element"><span class="xml_menu_check"></span><a><span>Add sibling element</span><span class="binding">alt+s</span></a></li><li id="xml_header_item_Add_element_to_parent"><span class="xml_menu_check"></span><a><span>Add element to parent</span><span class="binding">alt+p</span></a></li><li id="xml_header_item_Add_element_to_root"><span class="xml_menu_check"></span><a><span>Add element to root</span><span class="binding">alt+r</span></a></li><li id="xml_header_item_Add_text_to_element"><span class="xml_menu_check"></span><a><span>Add text to element</span><span class="binding">alt+t</span></a></li><li id="xml_header_item_Add_comment_to_element"><span class="xml_menu_check"></span><a><span>Add comment to element</span><span class="binding">alt+/</span></a></li><li id="xml_header_item_Add_CDATA_to_element"><span class="xml_menu_check"></span><a><span>Add CDATA to element</span><span class="binding">alt+,</span></a></li></ul></li><li id="xml_header_item_View"><span class="xml_menu_check"></span><a><span>View</span></a><ul class="sub_menu"><li id="xml_header_item_Switch_to_XML_View"><span class="xml_menu_check"></span><a><span>Switch to XML View</span><span class="binding">ctrl+alt+1</span></a></li><li id="xml_header_item_Switch_to_Text_View"><span class="xml_menu_check"></span><a><span>Switch to Text View</span><span class="binding">ctrl+alt+2</span></a></li></ul></li><li id="xml_header_item_Options"><span class="xml_menu_check"></span><a><span>Options</span></a><ul class="sub_menu"><li id="xml_header_item_Pretty_XML_Formatting"><span class="xml_menu_check">✓</span><a><span>Pretty XML Formatting</span></a></li><li id="xml_header_item_Enable_shortcut_keys"><span class="xml_menu_check">✓</span><a><span>Enable shortcut keys</span></a></li><li class="disabled" id="xml_header_item_Enforce_min/max_occurs"><span class="xml_menu_check"></span><a><span>Enforce min/max occurs</span></a></li><li id="xml_header_item_Prepend_new_elements"><span class="xml_menu_check"></span><a><span>Prepend new elements</span></a></li></ul></li><li class="header_mode_tab active_mode_tab" id="xml_header_item_XML"><span class="xml_menu_check"></span><a><span>XML</span></a></li><li class="header_mode_tab" id="xml_header_item_Text"><span class="xml_menu_check"></span><a><span>Text</span></a></li></ul></div></div><div class="xml_tab_area" style="padding-top: 32px;"><pre class="xml_problems_panel" style="display: none;"></pre><div id="gui_content0" class="gui_content" style="display: block;"><div class="xml_content"><div id="xml_element1" class="Akt_4Instance xml_node xml_element xml_root_element selected"><ul class="element_header"><li class="element_name"><span>Akt</span></li></ul><div><div class="placeholder">Use the menu to add subelements and attributes.</div><div id="xml_element1_cont_attributes" class="content_block xml_attrs" style="display: none;"></div><div id="xml_element1_cont_nodes" class="content_block xml_children ui-sortable" style="display: none;"></div></div></div></div></div></div></div><div class="xml_menu_column" style="position: absolute; left: 1124px; top: 0px;"><div><span class="xml_submit_status">Document is unchanged</span><input type="button" class="send_xml" name="submit" value="Export"></div><div class="xml_menu_container" style="max-height: 563px; overflow-y: auto;"><div class="menu_header">Add Subelement <span>▼</span></div><ul id="add_element_menu" class="menu_content" style="height: 41px; overflow: hidden;"><li title="Add Deo">Deo</li><li title="Add Glava">Glava</li></ul><div class="menu_header">Add Attribute <span>▼</span></div><ul id="add_attribute_menu" class="menu_content" style="height: 20px; overflow: hidden;"><li title="Add status" id="xml_element1_status_add">status</li></ul><div class="menu_header">Add Nodes <span>▼</span></div><ul id="add_node_menu" class="menu_content" style="display: block; height: 80px;"><li>Add Element</li><li>Add Attribute</li><li>Add CDATA</li><li>Add comment</li></ul><div class="menu_header">Add Top Element <span>▼</span></div><ul id="add_top_menu" class="menu_content" style="height: 41px; overflow: hidden;"><li title="Add Deo">Deo</li><li title="Add Glava">Glava</li></ul></div></div></div></div>


<!--   <form  novalidate="novalidate" ng-submit="save()"> -->
    

<!--     <label>Akt:</label> -->

<!-- <!--////////////////// Dodavanje deo /////////////////////////////////////////////////////////////-->    
<!--     <div ng-hide="hideDeoTabela()"> -->
<!--     <div class="form-group"> -->
<!--         <label>Deo:</label> -->
<!--         <table class="table table-striped table-bordered table-condensed table-hover"> -->
<!--             <tr> -->
<!--                  <th>Deo</th> -->
<!--             </tr> -->
<!--             <tr ng-repeat="deo in akt.delovi" ng-click="openModal(deo)"> -->
<!--                 <td>{{deo.tekst}}</td> -->
<!--             </tr> -->
<!--         </table>       -->
<!--     </div> -->
<!--     </div> -->

<!--     <div class="form-group"> -->
<!--       <button class="btn btn-default" ng-click="openModal($event)">Dodaj deo</button> -->
<!--     </div> -->

<!-- <!--/////////////////////////////////////////////////////////////////////////////////////////////////////-->    

<!-- <div ng-hide="hideRetry()"> proverava ima li nesto u listi deo i pokazuje ako ima -->
<!-- <div class="form-group"> -->
<!--  <!--   <label>Ovlascenja</label> --> 
<!--     <table class="table table-striped table-bordered table-condensed table-hover"> -->
<!--         <tr> -->
<!--             <th>Naziv</th> -->
<!--             <th>Glava</th> -->
<!--             <th>Redni broj</th> -->
<!--         </tr> -->
<!--         deo -->
<!--         <tr ng-repeat="glava in akt.glave" ng-click="openModalGlava(glava)"> -->
<!--             <td>{{glava.ime}}</td> -->
<!--             <td>{{glava.obim}}</td> -->
<!--             <td>{{glava.periodVazenja}}</td> -->
<!--         </tr> -->
<!--       </table> -->
<!--     </div> -->
<!--     <div class="form-group" > -->
<!--         <button class="btn btn-default" ng-click="openModalGlava()" >Dodaj glavu</button> -->
<!--     </div> -->
<!--     </div> -->

<!-- <div ng-hide="hideOdeljak()"> proverava ima li nesto u listi glava ako ima pravis odeljak -->
<!--   <div class="form-group"> -->
<!--     <label>Odeljak</label> -->
<!--       <table class="table table-striped table-bordered table-condensed table-hover"> -->
<!--         <tr> -->
<!--             <th>Naziv</th> -->
<!--             <th>Podeljak</th> -->
<!--             <th>Clan</th> -->
<!--         </tr>  -->
      
<!--       <tr ng-repeat="odeljak in akt.odeljci" ng-click="openModalOdeljak(odeljak)"> -->
<!--         <td>{{odeljak.naziv}}</td> -->
<!--         <td>{{odeljak.podeljak}}</td> -->
<!--         <td>{{odeljak.clan}}</td> -->
<!--       </tr> -->
<!--     </table> -->

<!--     <div class="form-group" > -->
<!--         <button class="btn btn-default" ng-click="openModalOdeljak()" >Dodaj odeljak</button> -->
<!--     </div> -->

<!--   </div> -->

<!--   <!--dugme--> 
<!-- </div> -->




  
<!--     <div class="form-group" > -->
<!--         <button class="btn btn-default" ng-click="openModalGlava()" >Dodaj glavu</button> -->
<!--     </div> -->





<!--   </form> -->
<!-- </div> -->

<!--     <div> -->
<!--         <button class="btn" type="submit">Sačuvaj</button> -->
<!--         <button class="btn" ng-click="delete()">Obriši</button> -->
<!--     </div> -->
<!--   </form> -->
</div>